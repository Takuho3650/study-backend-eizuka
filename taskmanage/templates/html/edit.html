<!DOCTYPE html>
{% load static %}
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="{% static 'taskmanage/css/edit.css' %}">   
    <link rel="stylesheet" href="{% static 'taskmanage/css/all.css' %}">
    <title>進捗管理サイト ミニ</title>
</head>

<header>
    <nav class="navbar navbar-dark bg-dark">
      <div class="container-fluid">
        <div class="d-flex align-items-center">
            <a class="navbar-brand" href="{% url 'home' %}">進捗管理サイト ミニ</a>
        </div>
      </div>
    </nav>
</header>

<body>
    <div class="container-sm p-3 p-md-4">
        <h1 class="mt-1 pb-1 pb-md-3 border-bottom">
            <a class="btn btn-outline-secondary h1 shadow-lg me-2 edit-design" data-bs-toggle="modal" data-bs-target="#cancelModal">
                <i class="bi bi-chevron-left fs-4"></i>
            </a>
              <div class="modal fade" id="cancelModal" tabindex="-1" aria-labelledby="cancelModalLabel">
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="cancelModalLabel">確認</h5>
                      <button type="button" class="btn-close h5" data-bs-dismiss="modal" aria-label="閉じる"></button>
                    </div>
                    <div class="modal-body">
                      <p class="fs-6">入力内容は保存されません。<br>よろしいですか？</p>
                    </div>
                    <div class="modal-footer">
                      <a class="btn btn-secondary" href="{% url 'home' %}">はい</a>
                      <button type="button" class="btn btn-primary" data-bs-dismiss="modal">いいえ</button>
                    </div>
                  </div>
                </div>
              </div>
            タスク編集
        </h1>
        <div class="container p-2 p-md-4 mt-3 shadow-lg p-2 mb-3 bg-body me-2 rounded-3 edit-design">
            <form class="row" method="post">
              {% csrf_token %}
                <div class="col-12 mb-3">
                    <label for="TaskName" class="form-label"><i class="bi bi-cursor-text"></i> タスク名</label>
                    <input type="text" class="form-control" id="TaskName" name="title" placeholder="無題のタスク" value="{{ task.title }}">
                </div>
                <div class="col-md-12 mb-3">
                    <label for="TaskIntroduction" class="form-label"><i class="bi bi-file-text-fill"></i> 概要</label>
                    <textarea class="form-control" id="TaskIntroduction" name="discription" rows="5" >{{ task.discription }}</textarea>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="TaskDeadLine" class="form-label"><i class="bi bi-calendar-event-fill"></i> 締切日</label>
                    <div class="input-group p-0 pb-2 mb-2" id="datetimepicker" data-target-input="nearest">
                      <input type="text" data-input class="form-control" id="TaskDeadLine" name="deadline" placeholder="yyyy/mm/dd oo:oo" data-target="#datetimepicker" style="background:white" value="{{ task.deadline }}">
                      <div class="input-group-text" data-toggle>
                        <i class="bi bi-calendar-plus"></i>
                      </div>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="TaskMember" class="form-label"><i class="bi bi-people-fill"></i> 参加者</label>
                    <input type="text" class="form-control" id="TaskMember" name="participants" placeholder="赤羽 太郎" value="{{ task.participants }}">
                </div>
                <div class="col-12">
                    <label class="form-label"><i class="bi bi-list-task"></i> チェックリスト</label>
                    <div class="col">
                      {% for check in checks %}
                        <div class="input-group p-0 pb-2 mb-2">
                          <span class="input-group-text"><i class="bi bi-chevron-expand"></i></span>
                          <input type="text" class="form-control" value="{{check.content}}" name="checks">
                          <div class="delete_entry"><button type="button" class="btn btn-outline-secondary"><i class="bi bi-dash"></i></button></div>
                        </div>
                      {% endfor %}
                    </div>
                    <div class="row justify-content-center align-items-center">
                        <div class="col-6 p-0 mb-4 text-center">
                            <button type="button" class="btn btn-outline-secondary" id="add_entry"><i class="bi bi-plus"></i></button>
                        </div>
                    </div>
                </div>
                <div class="col-12 pt-4 border-top">
                    
                    <a class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#cancelModal">
                        キャンセル
                    </a>
                      <div class="modal fade" tabindex="-1" aria-labelledby="cancelModalLabel">
                        <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">確認</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="閉じる"></button>
                            </div>
                            <div class="modal-body">
                              <p>入力内容は保存されません。<br>よろしいですか？</p>
                            </div>
                            <div class="modal-footer">
                              <a class="btn btn-secondary" href="{% url 'home' %}">はい</a>
                              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">いいえ</button>
                            </div>
                          </div>
                        </div>
                      </div>

                    <button class="btn btn-primary" type="submit" href="{{request.META.HTTP_REFERER}}">登録</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
    <script src="..\..\static\taskmanage\js\edit.js"></script>
</body>

</html>